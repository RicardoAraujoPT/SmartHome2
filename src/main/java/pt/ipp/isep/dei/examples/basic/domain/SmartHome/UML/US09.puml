@startuml
'https://plantuml.com/sequence-diagram
!theme mars
skinparam sequenceMessageAlign direction

title US09 : I want to get a list of all devices in a house, grouped by device functionality types. It must include device location.
[o-> ":US09GetDevicesByFunctionalityController" + : 1 : getDevicesByType()
":US09GetDevicesByFunctionalityController" ->":House" ++ : 1.1 : groupDevicesByType()



":House" -> ":House" : 1.1.3 : getRooms()


":House" -> ":Room" ++ : 1.1.4 : getDevices()
":Room" --> ":House" -- : devices
    ":House" -> ":House" : 1.1.5 : assignDeviceToGroupType(groupDevices, device, room)
    ":House" -> ":Device" ++ : 1.1.6 : getSensors()
    ":Device" --> ":House" -- :  sensors
    ":House" -> ":Sensor" ++ : 1.1.7 : getType()
    ":Sensor" --> ":House" -- : type


":House" --> ":US09GetDevicesByFunctionalityController" -- : groupedDevices
":US09GetDevicesByFunctionalityController" -> ":GetDevicesMapper" ++ : 1.2 : DevicesMap_DomainToDTO(groupedDevices)

":GetDevicesMapper" -> ":GetDevicesMapper" : 1.2.1. : deviceDomainToDTO(device,roomID)

":GetDevicesMapper" --> ":US09GetDevicesByFunctionalityController" -- : groupedDevicesByTypeDTO

[o<-- ":US09GetDevicesByFunctionalityController" -- : groupedDevicesByTypeDTO
@enduml